# ロボット-コンソール間通信プロトコル

ロボット-コンソール間は, byte配列でやり取りされる.  
送るbyte配列の形式を次に示す.

## プロトコル概観

送受信するデータ型によって, 次のように各バイトの表す意味が異なる.

「データ種別」「データのbyte表現」の共通説明は, 次章に述べる.

### 真偽値, 整数, 不動小数点数, 文字を送受信する場合
対象のデータ型 : boolean, byte, short, int, long, ushort, uint, ulong, char, float, double

| 1バイト目 | 2バイト目以降 |
| --- | --- |
| データ種別(0x01-0x0B) | データのbyte表現 |

### 文字列を送受信する場合
対象のデータ型 : string

| 1バイト目 | 2バイト目 | 3バイト目以降 |
| --- | --- | --- |
| データ種別(0x0C) | 文字列長(0x00-0xFF) | 文字列データのbyte表現 |

* 文字列は, ASCIIエンコーディングされて送受信される.

  文字列長は, 各文字をASCII文字と見たときの文字列長である.

### 配列を送受信する場合
対象のデータ型 : boolean, byte, short, int, long, ushort, uint, ulong, char, float, double の配列

(stringの配列や, 配列の配列は送受信できない.)

| 1バイト目 | 2バイト目 | 3バイト目 | 4バイト目以降 |
| --- | --- | --- | --- |
| データ種別(0x0D) | 配列の要素数(0x01～0xFF) | 配列要素のデータ種別(0x01～0x0B) | 各要素のデータのbyte表現 |

* 4バイト目以降は, 配列の各要素のデータのbyte表現が, 配列の要素数分だけ連続する.

* 配列の要素数に0x00を指定することは禁止とする.

## データ種別

送受信するデータの型を表す.

数値 | 意味
--- | ---
0x01 | booleanを送るよ
0x02 | byteを送るよ
0x03 | shortを送るよ
0x04 | intを送るよ
0x05 | longを送るよ
0x06 | ushortを送るよ
0x07 | uintを送るよ
0x08 | ulongを送るよ
0x09 | charを送るよ
0x0A | floatを送るよ
0x0B | doubleを送るよ
0x0C | stringを送るよ
0x0D | 配列を送るよ

## 備考
* 各データのバイト表現は, リトルエンディアンとする.

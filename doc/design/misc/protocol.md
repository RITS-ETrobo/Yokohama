# ロボット-コンソール間通信プロトコル

ロボット-コンソール間は, byte配列でやり取りされる.  
送るbyte配列の形式を次に示す.

## プロトコル概観

送受信するデータ型によって, 次のように各バイトの表す意味が異なる.

「データ種別」「データのbyte表現」の共通説明は, 次章に述べる.

### 真偽値, 整数, 不動小数点数, 文字を送受信する場合
対象のデータ型 : boolean, byte, short, int, long, ushort, uint, ulong, char, float, double

| 1バイト目 | 2バイト目以降 |
| --- | --- |
| データ種別(1d-11d) | データのbyte表現 |

### 文字列を送受信する場合
対象のデータ型 : string

| 1バイト目 | 2バイト目 | 3バイト目以降 |
| --- | --- | --- |
| データ種別(12d) | 文字列長(0d-255d) | 文字列データのbyte表現 |

* 文字列は, ASCIIエンコーディングされて送受信される.

  文字列長は, 各文字をASCII文字と見たときの文字列長である.

### 配列を送受信する場合
対象のデータ型 : boolean, byte, short, int, long, ushort, uint, ulong, char, float, double の配列

(stringの配列や, 配列の配列は送受信できない.)

| 1バイト目 | 2バイト目 | 3バイト目 | 4バイト目以降 |
| --- | --- | --- | --- |
| データ種別(13d) | 配列の要素数(1d～255d) | 配列要素のデータ種別(1d～11d) | 各要素のデータのbyte表現 |

* 4バイト目以降は, 配列の各要素のデータのbyte表現が, 配列の要素数分だけ連続する.

* 配列の要素数に0bを指定することは禁止とする.

## データ種別

送受信するデータの型を表す.

数値 | 意味
--- | ---
1d | booleanを送るよ
2d | byteを送るよ
3d | shortを送るよ
4d | intを送るよ
5d | longを送るよ
6d | ushortを送るよ
7d | uintを送るよ
8d | ulongを送るよ
9d | charを送るよ
10d | floatを送るよ
11d | doubleを送るよ
12d | stringを送るよ
13d | 配列を送るよ


## 備考
* 各データのバイト表現は, リトルエンディアンとする.
